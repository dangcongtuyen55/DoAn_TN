{
    "sourceFile": "FE/my-app/src/pages/Login.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 27,
            "patches": [
                {
                    "date": 1655864759790,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1655865244580,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,76 @@\n+import React, { useEffect, useState } from \"react\";\r\n+import { useDispatch, useSelector } from \"react-redux\";\r\n+import { useNavigate } from \"react-router\";\r\n+import { login } from \"../Redux/Action/UserAction\";\r\n+\r\n+const Login = ({ location }) => {\r\n+  const [email, setEmail] = useState(\"\");\r\n+  const [password, setPassword] = useState(\"\");\r\n+  const dispatch = useDispatch();\r\n+  const navigate = useNavigate();\r\n+  // const redirect = useLocation.search ? location.search.split(\"=\")[1] : \"/\"\r\n+\r\n+  const userLogin = useSelector((state) => state.userLogin);\r\n+  const { error, loading, user } = userLogin;\r\n+  const redirect = location.search ? location.search.split(\"=\")[1] : \"/\";\r\n+  useEffect(() => {\r\n+    if (user) {\r\n+      navigate(redirect);\r\n+    }\r\n+  });\r\n+  const onSubmitHandle = (e) => {\r\n+    e.preventDefault();\r\n+    dispatch(login(email, password));\r\n+    navigate(\"/\");\r\n+  };\r\n+  return (\r\n+    <div className=\"flex justify-center h-[800px] bg-pink-300\">\r\n+      <div className=\"flex-col\">\r\n+        <h1 className=\"flex justify-center font-bold text-4xl mt-8\">\r\n+          Đăng Nhập\r\n+        </h1>\r\n+        <form action=\"\" className=\"mt-20\" onSubmit={onSubmitHandle}>\r\n+          <div className=\"flex flex-col gap-y-4\">\r\n+            {/* {errorMessage && (\r\n+              <div className=\"error-message\">Error:{errorMessage}</div>\r\n+            )} */}\r\n+            <label htmlFor=\"name\" className=\"font-bold\">\r\n+              Email\r\n+            </label>\r\n+            <input\r\n+              type=\"email\"\r\n+              name=\"email\"\r\n+              className=\"w-[500px] bg-slate-100 p-3 rounded-lg focus:bg-white outline-cyan-500\"\r\n+              placeholder=\"Nhập email\"\r\n+              id=\"\"\r\n+              required\r\n+              value={email}\r\n+              onChange={(e) => setEmail(e.target.value)}\r\n+            />\r\n+            <label htmlFor=\"name\" className=\"font-bold\">\r\n+              Mật khẩu\r\n+            </label>\r\n+            <input\r\n+              type=\"password\"\r\n+              name=\"password\"\r\n+              className=\"w-[500px] bg-slate-100 p-3 rounded-lg  focus:bg-white outline-cyan-500\"\r\n+              placeholder=\"Nhập mật khẩu\"\r\n+              id=\"\"\r\n+              required\r\n+              value={password}\r\n+              onChange={(e) => setPassword(e.target.value)}\r\n+            />\r\n+            <button\r\n+              className=\"rounded-full border border-slate-300 hover:border-pink-700\"\r\n+              type=\"submit\"\r\n+            >\r\n+              Đăng nhập\r\n+            </button>\r\n+          </div>\r\n+        </form>\r\n+      </div>\r\n+    </div>\r\n+  );\r\n+};\r\n+\r\n+export default Login;\r\n"
                },
                {
                    "date": 1655865386032,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,9 @@\n import { useDispatch, useSelector } from \"react-redux\";\r\n import { useNavigate } from \"react-router\";\r\n import { login } from \"../Redux/Action/UserAction\";\r\n \r\n-const Login = ({ location }) => {\r\n+const Login = ({ history, location }) => {\r\n   const [email, setEmail] = useState(\"\");\r\n   const [password, setPassword] = useState(\"\");\r\n   const dispatch = useDispatch();\r\n   const navigate = useNavigate();\r\n@@ -14,9 +14,9 @@\n   const { error, loading, user } = userLogin;\r\n   const redirect = location.search ? location.search.split(\"=\")[1] : \"/\";\r\n   useEffect(() => {\r\n     if (user) {\r\n-      navigate(redirect);\r\n+      history.push(redirect);\r\n     }\r\n   });\r\n   const onSubmitHandle = (e) => {\r\n     e.preventDefault();\r\n@@ -73,80 +73,4 @@\n   );\r\n };\r\n \r\n export default Login;\r\n-import React, { useEffect, useState } from \"react\";\r\n-import { useDispatch, useSelector } from \"react-redux\";\r\n-import { useNavigate } from \"react-router\";\r\n-import { login } from \"../Redux/Action/UserAction\";\r\n-\r\n-const Login = ({ location }) => {\r\n-  const [email, setEmail] = useState(\"\");\r\n-  const [password, setPassword] = useState(\"\");\r\n-  const dispatch = useDispatch();\r\n-  const navigate = useNavigate();\r\n-  // const redirect = useLocation.search ? location.search.split(\"=\")[1] : \"/\"\r\n-\r\n-  const userLogin = useSelector((state) => state.userLogin);\r\n-  const { error, loading, user } = userLogin;\r\n-  const redirect = location.search ? location.search.split(\"=\")[1] : \"/\";\r\n-  useEffect(() => {\r\n-    if (userLogin) {\r\n-      navigate(redirect);\r\n-    }\r\n-  });\r\n-  const onSubmitHandle = (e) => {\r\n-    e.preventDefault();\r\n-    dispatch(login(email, password));\r\n-    navigate(\"/\");\r\n-  };\r\n-  return (\r\n-    <div className=\"flex justify-center h-[800px] bg-pink-300\">\r\n-      <div className=\"flex-col\">\r\n-        <h1 className=\"flex justify-center font-bold text-4xl mt-8\">\r\n-          Đăng Nhập\r\n-        </h1>\r\n-        <form action=\"\" className=\"mt-20\" onSubmit={onSubmitHandle}>\r\n-          <div className=\"flex flex-col gap-y-4\">\r\n-            {/* {errorMessage && (\r\n-              <div className=\"error-message\">Error:{errorMessage}</div>\r\n-            )} */}\r\n-            <label htmlFor=\"name\" className=\"font-bold\">\r\n-              Email\r\n-            </label>\r\n-            <input\r\n-              type=\"email\"\r\n-              name=\"email\"\r\n-              className=\"w-[500px] bg-slate-100 p-3 rounded-lg focus:bg-white outline-cyan-500\"\r\n-              placeholder=\"Nhập email\"\r\n-              id=\"\"\r\n-              required\r\n-              value={email}\r\n-              onChange={(e) => setEmail(e.target.value)}\r\n-            />\r\n-            <label htmlFor=\"name\" className=\"font-bold\">\r\n-              Mật khẩu\r\n-            </label>\r\n-            <input\r\n-              type=\"password\"\r\n-              name=\"password\"\r\n-              className=\"w-[500px] bg-slate-100 p-3 rounded-lg  focus:bg-white outline-cyan-500\"\r\n-              placeholder=\"Nhập mật khẩu\"\r\n-              id=\"\"\r\n-              required\r\n-              value={password}\r\n-              onChange={(e) => setPassword(e.target.value)}\r\n-            />\r\n-            <button\r\n-              className=\"rounded-full border border-slate-300 hover:border-pink-700\"\r\n-              type=\"submit\"\r\n-            >\r\n-              Đăng nhập\r\n-            </button>\r\n-          </div>\r\n-        </form>\r\n-      </div>\r\n-    </div>\r\n-  );\r\n-};\r\n-\r\n-export default Login;\r\n"
                },
                {
                    "date": 1655865443374,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,9 +16,9 @@\n   useEffect(() => {\r\n     if (user) {\r\n       history.push(redirect);\r\n     }\r\n-  });\r\n+  }, [dispatch, history, user]);\r\n   const onSubmitHandle = (e) => {\r\n     e.preventDefault();\r\n     dispatch(login(email, password));\r\n     navigate(\"/\");\r\n"
                },
                {
                    "date": 1655865827416,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,8 @@\n import React, { useEffect, useState } from \"react\";\r\n import { useDispatch, useSelector } from \"react-redux\";\r\n import { useNavigate } from \"react-router\";\r\n+import { useHistory, useLocation } from \"react-router-dom\";\r\n import { login } from \"../Redux/Action/UserAction\";\r\n \r\n const Login = ({ history, location }) => {\r\n   const [email, setEmail] = useState(\"\");\r\n@@ -11,12 +12,12 @@\n   // const redirect = useLocation.search ? location.search.split(\"=\")[1] : \"/\"\r\n \r\n   const userLogin = useSelector((state) => state.userLogin);\r\n   const { error, loading, user } = userLogin;\r\n-  const redirect = location.search ? location.search.split(\"=\")[1] : \"/\";\r\n+  const redirect = useLocation.search ? useLocation.search.split(\"=\")[1] : \"/\";\r\n   useEffect(() => {\r\n     if (user) {\r\n-      history.push(redirect);\r\n+      useHistory.push(redirect);\r\n     }\r\n   }, [dispatch, history, user]);\r\n   const onSubmitHandle = (e) => {\r\n     e.preventDefault();\r\n"
                },
                {
                    "date": 1655865951307,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,21 +3,23 @@\n import { useNavigate } from \"react-router\";\r\n import { useHistory, useLocation } from \"react-router-dom\";\r\n import { login } from \"../Redux/Action/UserAction\";\r\n \r\n-const Login = ({ history, location }) => {\r\n+const Login = () => {\r\n   const [email, setEmail] = useState(\"\");\r\n   const [password, setPassword] = useState(\"\");\r\n   const dispatch = useDispatch();\r\n   const navigate = useNavigate();\r\n+  const history = useHistory();\r\n+  const location = useLocation();\r\n   // const redirect = useLocation.search ? location.search.split(\"=\")[1] : \"/\"\r\n \r\n   const userLogin = useSelector((state) => state.userLogin);\r\n   const { error, loading, user } = userLogin;\r\n-  const redirect = useLocation.search ? useLocation.search.split(\"=\")[1] : \"/\";\r\n+  const redirect = location.search ? location.search.split(\"=\")[1] : \"/\";\r\n   useEffect(() => {\r\n     if (user) {\r\n-      useHistory.push(redirect);\r\n+      history.push(redirect);\r\n     }\r\n   }, [dispatch, history, user]);\r\n   const onSubmitHandle = (e) => {\r\n     e.preventDefault();\r\n"
                },
                {
                    "date": 1655866022807,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,25 +1,24 @@\n import React, { useEffect, useState } from \"react\";\r\n import { useDispatch, useSelector } from \"react-redux\";\r\n import { useNavigate } from \"react-router\";\r\n-import { useHistory, useLocation } from \"react-router-dom\";\r\n+import { useLocation } from \"react-router-dom\";\r\n import { login } from \"../Redux/Action/UserAction\";\r\n \r\n const Login = () => {\r\n   const [email, setEmail] = useState(\"\");\r\n   const [password, setPassword] = useState(\"\");\r\n   const dispatch = useDispatch();\r\n   const navigate = useNavigate();\r\n-  const history = useHistory();\r\n   const location = useLocation();\r\n   // const redirect = useLocation.search ? location.search.split(\"=\")[1] : \"/\"\r\n \r\n   const userLogin = useSelector((state) => state.userLogin);\r\n   const { error, loading, user } = userLogin;\r\n   const redirect = location.search ? location.search.split(\"=\")[1] : \"/\";\r\n   useEffect(() => {\r\n     if (user) {\r\n-      history.push(redirect);\r\n+      navigate.push(redirect);\r\n     }\r\n   }, [dispatch, history, user]);\r\n   const onSubmitHandle = (e) => {\r\n     e.preventDefault();\r\n"
                },
                {
                    "date": 1655866039204,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,9 +18,9 @@\n   useEffect(() => {\r\n     if (user) {\r\n       navigate.push(redirect);\r\n     }\r\n-  }, [dispatch, history, user]);\r\n+  }, [dispatch, navigate, user]);\r\n   const onSubmitHandle = (e) => {\r\n     e.preventDefault();\r\n     dispatch(login(email, password));\r\n     navigate(\"/\");\r\n"
                },
                {
                    "date": 1655866286620,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,9 +22,8 @@\n   }, [dispatch, navigate, user]);\r\n   const onSubmitHandle = (e) => {\r\n     e.preventDefault();\r\n     dispatch(login(email, password));\r\n-    navigate(\"/\");\r\n   };\r\n   return (\r\n     <div className=\"flex justify-center h-[800px] bg-pink-300\">\r\n       <div className=\"flex-col\">\r\n"
                },
                {
                    "date": 1655866376083,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,17 +14,18 @@\n \r\n   const userLogin = useSelector((state) => state.userLogin);\r\n   const { error, loading, user } = userLogin;\r\n   const redirect = location.search ? location.search.split(\"=\")[1] : \"/\";\r\n+  const onSubmitHandle = (e) => {\r\n+    e.preventDefault();\r\n+    dispatch(login(email, password));\r\n+  };\r\n   useEffect(() => {\r\n     if (user) {\r\n       navigate.push(redirect);\r\n     }\r\n   }, [dispatch, navigate, user]);\r\n-  const onSubmitHandle = (e) => {\r\n-    e.preventDefault();\r\n-    dispatch(login(email, password));\r\n-  };\r\n+\r\n   return (\r\n     <div className=\"flex justify-center h-[800px] bg-pink-300\">\r\n       <div className=\"flex-col\">\r\n         <h1 className=\"flex justify-center font-bold text-4xl mt-8\">\r\n"
                },
                {
                    "date": 1655866423453,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,13 +13,14 @@\n   // const redirect = useLocation.search ? location.search.split(\"=\")[1] : \"/\"\r\n \r\n   const userLogin = useSelector((state) => state.userLogin);\r\n   const { error, loading, user } = userLogin;\r\n-  const redirect = location.search ? location.search.split(\"=\")[1] : \"/\";\r\n+\r\n   const onSubmitHandle = (e) => {\r\n     e.preventDefault();\r\n     dispatch(login(email, password));\r\n   };\r\n+  const redirect = location.search ? location.search.split(\"=\")[1] : \"/\";\r\n   useEffect(() => {\r\n     if (user) {\r\n       navigate.push(redirect);\r\n     }\r\n"
                },
                {
                    "date": 1655866443817,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,9 +21,9 @@\n   };\r\n   const redirect = location.search ? location.search.split(\"=\")[1] : \"/\";\r\n   useEffect(() => {\r\n     if (user) {\r\n-      navigate.push(redirect);\r\n+      navigate(redirect);\r\n     }\r\n   }, [dispatch, navigate, user]);\r\n \r\n   return (\r\n"
                },
                {
                    "date": 1655869848191,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,9 +20,11 @@\n     dispatch(login(email, password));\r\n   };\r\n   const redirect = location.search ? location.search.split(\"=\")[1] : \"/\";\r\n   useEffect(() => {\r\n-    if (user) {\r\n+    if (user.role === \"admin\") {\r\n+      navigate(\"*\");\r\n+    } else {\r\n       navigate(redirect);\r\n     }\r\n   }, [dispatch, navigate, user]);\r\n \r\n"
                },
                {
                    "date": 1655869917387,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,10 +19,12 @@\n     e.preventDefault();\r\n     dispatch(login(email, password));\r\n   };\r\n   const redirect = location.search ? location.search.split(\"=\")[1] : \"/\";\r\n+  const role = user.role;\r\n+  console.log(role);\r\n   useEffect(() => {\r\n-    if (user.role === \"admin\") {\r\n+    if (role === \"admin\") {\r\n       navigate(\"*\");\r\n     } else {\r\n       navigate(redirect);\r\n     }\r\n"
                },
                {
                    "date": 1655870030340,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,17 +19,10 @@\n     e.preventDefault();\r\n     dispatch(login(email, password));\r\n   };\r\n   const redirect = location.search ? location.search.split(\"=\")[1] : \"/\";\r\n-  const role = user.role;\r\n-  console.log(role);\r\n-  useEffect(() => {\r\n-    if (role === \"admin\") {\r\n-      navigate(\"*\");\r\n-    } else {\r\n-      navigate(redirect);\r\n-    }\r\n-  }, [dispatch, navigate, user]);\r\n+  console.log(user.role);\r\n+  useEffect(() => {}, [dispatch, navigate, user]);\r\n \r\n   return (\r\n     <div className=\"flex justify-center h-[800px] bg-pink-300\">\r\n       <div className=\"flex-col\">\r\n"
                },
                {
                    "date": 1655870079028,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,10 +19,13 @@\n     e.preventDefault();\r\n     dispatch(login(email, password));\r\n   };\r\n   const redirect = location.search ? location.search.split(\"=\")[1] : \"/\";\r\n-  console.log(user.role);\r\n-  useEffect(() => {}, [dispatch, navigate, user]);\r\n+  useEffect(() => {\r\n+    if (user) {\r\n+      navigate(redirect);\r\n+    }\r\n+  }, [dispatch, navigate, user]);\r\n \r\n   return (\r\n     <div className=\"flex justify-center h-[800px] bg-pink-300\">\r\n       <div className=\"flex-col\">\r\n"
                },
                {
                    "date": 1656057158137,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,10 +20,12 @@\n     dispatch(login(email, password));\r\n   };\r\n   const redirect = location.search ? location.search.split(\"=\")[1] : \"/\";\r\n   useEffect(() => {\r\n-    if (user) {\r\n+    if (user.role === \"user\") {\r\n       navigate(redirect);\r\n+    } else {\r\n+      navigate(\"*\");\r\n     }\r\n   }, [dispatch, navigate, user]);\r\n \r\n   return (\r\n"
                },
                {
                    "date": 1656057211476,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,12 +20,10 @@\n     dispatch(login(email, password));\r\n   };\r\n   const redirect = location.search ? location.search.split(\"=\")[1] : \"/\";\r\n   useEffect(() => {\r\n-    if (user.role === \"user\") {\r\n+    if (user) {\r\n       navigate(redirect);\r\n-    } else {\r\n-      navigate(\"*\");\r\n     }\r\n   }, [dispatch, navigate, user]);\r\n \r\n   return (\r\n"
                },
                {
                    "date": 1656057243043,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,8 +13,9 @@\n   // const redirect = useLocation.search ? location.search.split(\"=\")[1] : \"/\"\r\n \r\n   const userLogin = useSelector((state) => state.userLogin);\r\n   const { error, loading, user } = userLogin;\r\n+  console.log(user.role);\r\n \r\n   const onSubmitHandle = (e) => {\r\n     e.preventDefault();\r\n     dispatch(login(email, password));\r\n"
                },
                {
                    "date": 1656057266249,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,8 @@\n   // const redirect = useLocation.search ? location.search.split(\"=\")[1] : \"/\"\r\n \r\n   const userLogin = useSelector((state) => state.userLogin);\r\n   const { error, loading, user } = userLogin;\r\n-  console.log(user.role);\r\n \r\n   const onSubmitHandle = (e) => {\r\n     e.preventDefault();\r\n     dispatch(login(email, password));\r\n"
                },
                {
                    "date": 1656057320490,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,9 +24,9 @@\n     if (user) {\r\n       navigate(redirect);\r\n     }\r\n   }, [dispatch, navigate, user]);\r\n-\r\n+  console.log(user.role);\r\n   return (\r\n     <div className=\"flex justify-center h-[800px] bg-pink-300\">\r\n       <div className=\"flex-col\">\r\n         <h1 className=\"flex justify-center font-bold text-4xl mt-8\">\r\n"
                },
                {
                    "date": 1656057362642,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,15 +18,16 @@\n   const onSubmitHandle = (e) => {\r\n     e.preventDefault();\r\n     dispatch(login(email, password));\r\n   };\r\n+  console.log(user.role);\r\n   const redirect = location.search ? location.search.split(\"=\")[1] : \"/\";\r\n   useEffect(() => {\r\n     if (user) {\r\n       navigate(redirect);\r\n     }\r\n   }, [dispatch, navigate, user]);\r\n-  console.log(user.role);\r\n+\r\n   return (\r\n     <div className=\"flex justify-center h-[800px] bg-pink-300\">\r\n       <div className=\"flex-col\">\r\n         <h1 className=\"flex justify-center font-bold text-4xl mt-8\">\r\n"
                },
                {
                    "date": 1656057425056,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,9 +18,8 @@\n   const onSubmitHandle = (e) => {\r\n     e.preventDefault();\r\n     dispatch(login(email, password));\r\n   };\r\n-  console.log(user.role);\r\n   const redirect = location.search ? location.search.split(\"=\")[1] : \"/\";\r\n   useEffect(() => {\r\n     if (user) {\r\n       navigate(redirect);\r\n"
                },
                {
                    "date": 1656057564096,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,8 +6,9 @@\n \r\n const Login = () => {\r\n   const [email, setEmail] = useState(\"\");\r\n   const [password, setPassword] = useState(\"\");\r\n+  const role = useState(\"\");\r\n   const dispatch = useDispatch();\r\n   const navigate = useNavigate();\r\n   const location = useLocation();\r\n   // const redirect = useLocation.search ? location.search.split(\"=\")[1] : \"/\"\r\n@@ -16,9 +17,9 @@\n   const { error, loading, user } = userLogin;\r\n \r\n   const onSubmitHandle = (e) => {\r\n     e.preventDefault();\r\n-    dispatch(login(email, password));\r\n+    dispatch(login(email, password, role));\r\n   };\r\n   const redirect = location.search ? location.search.split(\"=\")[1] : \"/\";\r\n   useEffect(() => {\r\n     if (user) {\r\n"
                },
                {
                    "date": 1656057636784,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,12 +19,15 @@\n   const onSubmitHandle = (e) => {\r\n     e.preventDefault();\r\n     dispatch(login(email, password, role));\r\n   };\r\n+  console.log(user.role);\r\n   const redirect = location.search ? location.search.split(\"=\")[1] : \"/\";\r\n   useEffect(() => {\r\n-    if (user) {\r\n+    if (user.role === \"user\") {\r\n       navigate(redirect);\r\n+    } else {\r\n+      navigate(\"*\");\r\n     }\r\n   }, [dispatch, navigate, user]);\r\n \r\n   return (\r\n"
                },
                {
                    "date": 1656057659955,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,8 @@\n   const onSubmitHandle = (e) => {\r\n     e.preventDefault();\r\n     dispatch(login(email, password, role));\r\n   };\r\n-  console.log(user.role);\r\n   const redirect = location.search ? location.search.split(\"=\")[1] : \"/\";\r\n   useEffect(() => {\r\n     if (user.role === \"user\") {\r\n       navigate(redirect);\r\n"
                },
                {
                    "date": 1656057733642,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,12 +21,10 @@\n     dispatch(login(email, password, role));\r\n   };\r\n   const redirect = location.search ? location.search.split(\"=\")[1] : \"/\";\r\n   useEffect(() => {\r\n-    if (user.role === \"user\") {\r\n+    if (user) {\r\n       navigate(redirect);\r\n-    } else {\r\n-      navigate(\"*\");\r\n     }\r\n   }, [dispatch, navigate, user]);\r\n \r\n   return (\r\n"
                },
                {
                    "date": 1656129580367,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,8 +17,9 @@\n   const { error, loading, user } = userLogin;\r\n \r\n   const onSubmitHandle = (e) => {\r\n     e.preventDefault();\r\n+\r\n     dispatch(login(email, password, role));\r\n   };\r\n   const redirect = location.search ? location.search.split(\"=\")[1] : \"/\";\r\n   useEffect(() => {\r\n"
                }
            ],
            "date": 1655864759790,
            "name": "Commit-0",
            "content": "import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router\";\r\nimport { login } from \"../Redux/Action/UserAction\";\r\n\r\nconst Login = ({ location }) => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  // const redirect = useLocation.search ? location.search.split(\"=\")[1] : \"/\"\r\n\r\n  const userLogin = useSelector((state) => state.userLogin);\r\n  const { error, loading, user } = userLogin;\r\n  const redirect = location.search ? location.search.split(\"=\")[1] : \"/\";\r\n  useEffect(() => {\r\n    if (userLogin) {\r\n      navigate(redirect);\r\n    }\r\n  });\r\n  const onSubmitHandle = (e) => {\r\n    e.preventDefault();\r\n    dispatch(login(email, password));\r\n    navigate(\"/\");\r\n  };\r\n  return (\r\n    <div className=\"flex justify-center h-[800px] bg-pink-300\">\r\n      <div className=\"flex-col\">\r\n        <h1 className=\"flex justify-center font-bold text-4xl mt-8\">\r\n          Đăng Nhập\r\n        </h1>\r\n        <form action=\"\" className=\"mt-20\" onSubmit={onSubmitHandle}>\r\n          <div className=\"flex flex-col gap-y-4\">\r\n            {/* {errorMessage && (\r\n              <div className=\"error-message\">Error:{errorMessage}</div>\r\n            )} */}\r\n            <label htmlFor=\"name\" className=\"font-bold\">\r\n              Email\r\n            </label>\r\n            <input\r\n              type=\"email\"\r\n              name=\"email\"\r\n              className=\"w-[500px] bg-slate-100 p-3 rounded-lg focus:bg-white outline-cyan-500\"\r\n              placeholder=\"Nhập email\"\r\n              id=\"\"\r\n              required\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n            />\r\n            <label htmlFor=\"name\" className=\"font-bold\">\r\n              Mật khẩu\r\n            </label>\r\n            <input\r\n              type=\"password\"\r\n              name=\"password\"\r\n              className=\"w-[500px] bg-slate-100 p-3 rounded-lg  focus:bg-white outline-cyan-500\"\r\n              placeholder=\"Nhập mật khẩu\"\r\n              id=\"\"\r\n              required\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n            />\r\n            <button\r\n              className=\"rounded-full border border-slate-300 hover:border-pink-700\"\r\n              type=\"submit\"\r\n            >\r\n              Đăng nhập\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"
        }
    ]
}